# CosmoDex

A decentralized token launcher and automated market maker (AMM) built on Stellar's Soroban smart contracts using **Scaffold Stellar**. CosmoDex enables users to create, launch, and trade tokens seamlessly while providing liquidity pools for decentralized exchange functionality.

## ğŸš€ Built with Scaffold Stellar

CosmoDex is built using Scaffold Stellar, a powerful framework for developing Stellar dApps with Soroban smart contracts. Scaffold Stellar provides:

- **Automatic TypeScript Client Generation**: Contract clients are automatically generated from Soroban contracts, eliminating manual binding code
- **Hot Reload Development**: Contracts are watched and clients are regenerated automatically during development
- **Environment Management**: Centralized contract configuration through `environments.toml`
- **Wallet Integration**: Built-in wallet connectivity with support for Freighter, Albedo, XBull, and other Stellar wallets
- **Type Safety**: Full TypeScript support with type-safe contract interactions
- **Development Tools**: Integrated debugging and contract interaction tools

### Scaffold Stellar Features Used

- **Auto-generated Contract Clients**: All contract interactions use TypeScript clients generated by Scaffold Stellar in the `packages/` directory
- **Environment Configuration**: Contract addresses and network settings managed in `environments.toml`
- **Contract Watching**: `stellar scaffold watch --build-clients` automatically rebuilds clients when contracts change
- **Wallet Provider**: Integrated `WalletProvider` and `useWallet` hook for seamless wallet connections
- **Contract Utilities**: Network configuration and RPC management handled by Scaffold Stellar's utilities

## ğŸ“– Project Description

CosmoDex is a comprehensive DeFi platform that combines token creation, liquidity provision, and decentralized trading into a single, user-friendly interface. Built on the Stellar network using Soroban smart contracts and Scaffold Stellar framework, CosmoDex empowers users to:

- **Launch Tokens**: Create and deploy custom tokens with metadata stored on IPFS
- **Provide Liquidity**: Add liquidity to pools and automatically receive Liquidity Provider (LP) tokens representing your share of the pool
- **Earn Rewards**: LP tokens entitle holders to a proportional share of trading fees and pool ownership
- **Remove Liquidity**: Burn LP tokens to withdraw your proportional share of the pool's reserves
- **Trade Tokens**: Swap tokens using an automated market maker (AMM) model with real-time price calculations
- **Manage Portfolio**: Track token balances, LP token holdings, and liquidity positions across all pools

The platform leverages Scaffold Stellar's infrastructure for seamless contract integration, automatic client generation, and wallet connectivity, making it accessible to both technical and non-technical users.

### How Liquidity Provision Works

When users add liquidity to a pool:

1. **Proportional Contribution**: Users provide two tokens (e.g., Token A and Token B) in amounts that maintain the pool's current price ratio
2. **Automatic LP Token Issuance**: The pool contract automatically calculates and mints Liquidity Provider (LP) tokens to the user's wallet
3. **Ownership Representation**: LP tokens represent the user's proportional share of the pool's total liquidity
4. **Fee Entitlement**: LP token holders earn a proportional share of trading fees generated by the pool
5. **Liquidity Withdrawal**: Users can burn their LP tokens at any time to withdraw their proportional share of the pool's reserves (both tokens)

LP tokens are fungible and can be tracked, transferred, or used to remove liquidity. The amount of LP tokens received is calculated based on the liquidity contribution relative to the pool's existing reserves.

## ğŸ“‹ Deployed Contracts (Testnet)

### Core Contracts

- **Token Factory**: [CAZ7KEXHZDHP6ZZXOADXNBN4XY3TPRVWJSHU3UDXIN3GKJALJDAR2S6Y](https://stellar.expert/explorer/testnet/contract/CAZ7KEXHZDHP6ZZXOADXNBN4XY3TPRVWJSHU3UDXIN3GKJALJDAR2S6Y)
  - Manages token creation and deployment
  - Stores token metadata and registry
  - Handles IPFS metadata storage

- **Pool Factory**: [CCA6WZEXVK2AFI2BIG5PSJODNL2U6727KHISBDGEXV2FTGPW4DPGNZH3](https://stellar.expert/explorer/testnet/contract/CCA6WZEXVK2AFI2BIG5PSJODNL2U6727KHISBDGEXV2FTGPW4DPGNZH3)
  - Creates and manages liquidity pools
  - Handles pool initialization and configuration
  - Manages pool registry

### Sample Contracts

- **Sample Token Contract**: [CCO4GB5UUABKSOGV2I5C3QM2OVPMN5DZ33RKLCCIKWHXBVQFGNCHMAXT](https://stellar.expert/explorer/testnet/contract/CCO4GB5UUABKSOGV2I5C3QM2OVPMN5DZ33RKLCCIKWHXBVQFGNCHMAXT)
  - Example fungible token implementation
  - Demonstrates token functionality and standards

- **Sample Pool Contract**: [CA3R36UNRGXY44QPQ6P65NLZLT3CY5E35A5WHPNLKR3ZMONATM3MQDAF](https://stellar.expert/explorer/testnet/contract/CA3R36UNRGXY44QPQ6P65NLZLT3CY5E35A5WHPNLKR3ZMONATM3MQDAF)
  - Example liquidity pool implementation
  - Demonstrates AMM functionality and swap mechanics
  - Handles LP token issuance when liquidity is added
  - Manages LP token balances and proportional withdrawals

## âœ¨ Features

- ğŸª™ **Token Launch**: Create and deploy tokens with custom metadata stored on IPFS
- ğŸ’§ **Liquidity Pools**: Add and remove liquidity from trading pairs with proportional calculations
- ğŸª™ **LP Token Issuance**: Automatically receive Liquidity Provider (LP) tokens when adding liquidity, representing your ownership share in the pool
- ğŸ’° **Fee Earnings**: Earn trading fees proportional to your LP token holdings
- ğŸ“Š **LP Token Management**: View and manage your LP token balances across all pools
- ğŸ”„ **Token Swaps**: Trade tokens using AMM pricing with real-time output calculations
- ğŸ“Š **Portfolio Tracking**: View token balances, LP token holdings, and liquidity positions across all pools
- ğŸ“ˆ **Market Data**: Real-time price, market cap, volume, and 24h change calculations from pool reserves
- ğŸ” **Wallet Integration**: Connect with Stellar wallets seamlessly via Scaffold Stellar's wallet system
- ğŸ“± **Responsive UI**: Modern, mobile-friendly interface built with Tailwind CSS
- ğŸ¨ **Dark Theme**: Beautiful dark mode interface with Stellar Design System components

## ğŸ› ï¸ Tech Stack

- **Framework**: Scaffold Stellar - Stellar dApp development framework

## ğŸš€ Getting Started

### Prerequisites

- **Node.js** 18+ and npm
- **Rust** and Cargo (for contract development)
- **Stellar CLI** tools (`stellar` command)
- **Git**

### Installation

1. **Clone the repository**

```bash
git clone https://github.com/Akinbola247/cosmodex
cd cosmodex
```

2. **Install dependencies**

```bash
npm install
```

3. **Install contract packages**

Scaffold Stellar generates TypeScript clients for each contract. Install them:

```bash
npm run dev
```

This command installs and builds all contract client packages in the `packages/` directory.

4. **Configure environment variables**

Create a `.env` file in the root directory:

```env
PUBLIC_STELLAR_NETWORK=TESTNET
PUBLIC_STELLAR_RPC_URL=https://soroban-testnet.stellar.org
PUBLIC_STELLAR_HORIZON_URL=https://horizon-testnet.stellar.org
PUBLIC_PINATA_JWT=your_pinata_jwt_token
PUBLIC_PINATA_GATEWAY=gateway.pinata.cloud
```

5. **Configure contract addresses**

Contract addresses are managed in `environments.toml`. The file is pre-configured with testnet contract addresses. For local development, update the `[development.network]` section.

### Development

Start the development server with Scaffold Stellar's contract watcher:

```bash
npm run dev
```

This command runs two processes concurrently:

- `stellar scaffold watch --build-clients`: Watches for contract changes and regenerates TypeScript clients
- `vite`: Starts the Vite development server

The application will be available at `http://localhost:5173`

## ğŸ“ Project Structure

```
cosmov2/
â”œâ”€â”€ contracts/              # Soroban smart contracts (Rust)
â”‚   â”œâ”€â”€ tokenfactory/      # Token factory contract
â”‚   â”œâ”€â”€ poolfactory/       # Pool factory contract
â”‚   â”œâ”€â”€ token/             # Token contract implementation
â”‚   â”œâ”€â”€ tokenlaunch/       # Token launch contract
â”‚   â””â”€â”€ pool/              # Pool contract implementation
â”œâ”€â”€ packages/               # Auto-generated TypeScript contract clients (Scaffold Stellar)
â”‚   â”œâ”€â”€ tokenfactory/      # Generated tokenfactory client
â”‚   â”œâ”€â”€ poolfactory/       # Generated poolfactory client
â”‚   â”œâ”€â”€ token/             # Generated token client
â”‚   â”œâ”€â”€ tokenlaunch/       # Generated tokenlaunch client
â”‚   â””â”€â”€ pool/              # Generated pool client
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/        # React components
â”‚   â”‚   â”œâ”€â”€ ui/           # shadcn/ui components
â”‚   â”‚   â””â”€â”€ ...           # Custom components
â”‚   â”œâ”€â”€ pages/            # Application pages
â”‚   â”‚   â”œâ”€â”€ Home.tsx      # Landing page with token list
â”‚   â”‚   â”œâ”€â”€ Launch.tsx    # Token launch page
â”‚   â”‚   â”œâ”€â”€ Swap.tsx      # Token swap page
â”‚   â”‚   â”œâ”€â”€ Liquidity.tsx # Liquidity management page
â”‚   â”‚   â”œâ”€â”€ Portfolio.tsx # Portfolio tracking page
â”‚   â”‚   â””â”€â”€ Minter.tsx    # Token faucet/minter page
â”‚   â”œâ”€â”€ contracts/        # Contract client imports and utilities
â”‚   â”‚   â”œâ”€â”€ util.ts       # Network configuration (Scaffold Stellar)
â”‚   â”‚   â””â”€â”€ ...           # Contract client imports
â”‚   â”œâ”€â”€ hooks/            # Custom React hooks
â”‚   â”‚   â””â”€â”€ useWallet.ts  # Wallet hook (Scaffold Stellar)
â”‚   â”œâ”€â”€ providers/        # React context providers
â”‚   â”‚   â””â”€â”€ WalletProvider.tsx  # Wallet provider (Scaffold Stellar)
â”‚   â””â”€â”€ lib/              # Utility functions
â”‚       â”œâ”€â”€ contract-addresses.ts  # Contract address constants
â”‚       â”œâ”€â”€ pinata.ts     # IPFS/Pinata integration
â”‚       â””â”€â”€ ...           # Other utilities
â”œâ”€â”€ environments.toml     # Scaffold Stellar environment configuration
â”œâ”€â”€ deployment-testnet.json  # Testnet deployment information
â”œâ”€â”€ vercel.json          # Vercel deployment configuration
â””â”€â”€ package.json         # Project dependencies and scripts
```

**Note**: This project is deployed on Stellar Testnet. All contracts and transactions are on the test network.
